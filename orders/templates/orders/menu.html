{% extends 'orders/base.html' %}
{% load static %}

{% block content %}
<div class="banner">
    <h1 style="text-align: center;">Triton Pub Menu</h1>
</div>

<div class="container" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px;">
    {% for meal in meals %}
    <div class="card" style="width: 300px; border: 1px solid #ccc; border-radius: 10px; overflow: hidden; box-shadow: 2px 2px 8px rgba(0,0,0,0.1); background-color: #fff;">
        {% if meal.image %}
        <img src="{{ meal.image.url }}" alt="{{ meal.name }}" style="width: 100%; height: 200px; object-fit: cover;">
        {% endif %}
        <div style="padding: 15px;">
            <h3>{{ meal.name }}</h3>
            <p>Price: ${{ meal.price }}</p>
            <p>Category: {{ meal.get_category_display }}</p>
            <p>Side: {{ meal.get_side_display }}</p>
            {% if meal.mealSwipe %}
                <p><strong>Eligible for Meal Swipe</strong></p>
            {% endif %}
            <form method="POST" action="{% url 'add_to_cart' meal.id %}">
                {% csrf_token %}
                <label for="side">Side:</label>
                <select name="side">
                    {% for key, value in meal.side.field.choices %}
                        <option value="{{ key }}" {% if key == meal.side %}selected{% endif %}>{{ value }}</option>
                    {% endfor %}
                </select><br><br>

                <label for="quantity">Quantity:</label>
                <input type="number" name="quantity" min="1" value="1" style="width: 60px;"><br><br>

                <label for="special_request">Special Request:</label>
                <input type="text" name="special_request" placeholder="Any notes..." style="width: 100%;"><br><br>

                <button type="submit" class="button">Add to Cart</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
